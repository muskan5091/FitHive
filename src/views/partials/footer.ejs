<footer>
  <!-- ================= CHATBOT WIDGET ================= -->
  <style>
    #chatbotButton {
      position: fixed;
      right: 18px;
      bottom: 18px;
      background: #a5683a;
      color: #fff;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      cursor: pointer;
      z-index: 20000;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }

    .chat-modal {
      position: fixed;
      right: 18px;
      bottom: 90px;
      width: 360px;
      max-width: calc(100% - 36px);
      max-height: 60vh;
      min-height: 260px;
      display: none;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      overflow: hidden;
      z-index: 20000;
      flex-direction: column;
    }
    .chat-modal.open { display: flex; }

    .chat-header {
      background: #a5683a;
      color: #fff;
      padding: 12px;
      font-weight: 600;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .chat-body {
      flex: 1;
      padding: 14px;
      overflow-y: auto;
      background: #f6f6f6;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .msg { display: flex; gap: 8px; }
    .msg.bot { justify-content: flex-start; }
    .msg.user { justify-content: flex-end; }

    .bubble {
      max-width: 76%;
      padding: 10px 12px;
      border-radius: 12px;
      font-size: 14px;
      line-height: 1.35;
    }

    .msg.bot .bubble {
      background: #fff;
      border: 1px solid #eaeaea;
      border-bottom-left-radius: 4px;
    }

    .msg.user .bubble {
      background: #a5683a;
      color: #fff;
      border-bottom-right-radius: 4px;
    }

    .chat-footer {
      padding: 10px;
      border-top: 1px solid #eee;
      display: flex;
      gap: 8px;
    }

    .chat-input {
      flex: 1;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ddd;
      pointer-events: auto;
    }

    .chat-send {
      background: #a5683a;
      color: #fff;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      pointer-events: auto;
    }

    .footer-wrapper {
      text-align: center;
    }
  </style>

  <!-- Floating chat button -->
  <div id="chatbotButton" title="Chat with us">ðŸ’¬</div>

  <!-- Chat modal -->
  <div class="chat-modal" id="chatModal">
    <div class="chat-header">
      <span>Helper</span>
      <button id="closeChat" style="background:none;border:none;color:white;font-size:18px;cursor:pointer">âœ•</button>
    </div>

    <div class="chat-body" id="chatBody"></div>

    <div class="chat-footer">
      <input id="chatInput" class="chat-input" placeholder="Type a question..." />
      <button id="chatSend" class="chat-send">Send</button>
    </div>
  </div>

  <!-- ================= CHATBOT SCRIPT ================= -->
  <script>
    (function () {
      const btn = document.getElementById("chatbotButton");
      const modal = document.getElementById("chatModal");
      const closeBtn = document.getElementById("closeChat");
      const sendBtn = document.getElementById("chatSend");
      const input = document.getElementById("chatInput");
      const body = document.getElementById("chatBody");

      const INITIAL_MESSAGE =
        "Hi ðŸ‘‹ I can help with orders, delivery, sizing, returns, and payments.";

      const FAQS = [
        { keywords: ["order", "track"], answer: "Track your order from the My Orders section after login." },
        { keywords: ["return", "refund"], answer: "Returns are allowed within 7 days of delivery." },
        { keywords: ["delivery", "shipping"], answer: "Delivery usually takes 3â€“5 business days." },
        { keywords: ["payment", "upi", "card"], answer: "We support UPI, debit/credit cards, and net banking." },
        { keywords: ["size", "fit"], answer: "You can find the size chart on each product page." },
        { keywords: ["custom"], answer: "Some products support measurement-based customization." },
        { keywords: ["contact", "help"], answer: "Visit the Contact Us page or ask here for support." }
      ];

      function getFaqReply(msg) {
        msg = msg.toLowerCase();
        for (const f of FAQS) {
          if (f.keywords.some(k => msg.includes(k))) return f.answer;
        }
        return null;
      }

      function appendMessage(text, who) {
        const wrap = document.createElement("div");
        wrap.className = "msg " + who;
        const bubble = document.createElement("div");
        bubble.className = "bubble";
        bubble.textContent = text;
        wrap.appendChild(bubble);
        body.appendChild(wrap);
        body.scrollTop = body.scrollHeight;
      }

      function openChat() {
        modal.classList.add("open");
        if (!body.innerHTML) appendMessage(INITIAL_MESSAGE, "bot");
        setTimeout(() => input.focus(), 100);
      }

      function closeChat() {
        modal.classList.remove("open");
      }

      btn.addEventListener("click", openChat);
      closeBtn.addEventListener("click", closeChat);

      async function sendMessage() {
        const text = input.value.trim();
        if (!text) return;

        appendMessage(text, "user");
        input.value = "";

        const faq = getFaqReply(text);
        if (faq) {
          appendMessage(faq, "bot");
          return;
        }

        try {
          const res = await fetch("/api/chat", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message: text })
          });
          const data = await res.json();
          appendMessage(data.reply || "Sorry, no response.", "bot");
        } catch {
          appendMessage("Network error. Please try again.", "bot");
        }
      }

      sendBtn.addEventListener("click", sendMessage);
      input.addEventListener("keydown", e => {
        if (e.key === "Enter") sendMessage();
      });
    })();
  </script>

  <!-- ================= FOOTER CONTENT ================= -->
  <div class="footer-wrapper">
    <div class="footer-container">
      <div class="footer-section about">
        <h2 class="footer-logo">FIT<span>HIVE</span></h2>
        <p>Premium gym wear for your active lifestyle. Style meets performance.</p>
      </div>

      <div class="footer-section">
        <h3>SHOP</h3>
        <ul>
          <li><a href="/mens">Men</a></li>
          <li><a href="/womens">Women</a></li>
          <li><a href="/featured">Featured</a></li>
        </ul>
      </div>

      <div class="footer-section">
        <h3>COMPANY</h3>
        <ul>
          <li><a href="/about">About Us</a></li>
          <li><a href="/contact">Contact Us</a></li>
          <li><a href="/privacy">Privacy Policy</a></li>
          <li><a href="/terms">Terms of Service</a></li>
        </ul>
      </div>

      <div class="footer-section">
        <h3>FOLLOW US</h3>
        <ul>
          <li><a href="#">Instagram</a></li>
          <li><a href="#">Facebook</a></li>
          <li><a href="#">Twitter</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-bottom">
      <p>Â© 2025 FitHive. All rights reserved.</p>
    </div>
  </div>
</footer>


