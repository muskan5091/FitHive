<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('partials/head') %>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/product.css">
  <title>Fusion Collection â€” FitHive</title>
</head>

<body>
  <%- include('partials/header') %>

  <!-- ðŸŒŸ HERO SECTION -->
  <section class="fusion-hero">
    <h1>The Fusion Collection</h1>
    <p>Crafted for those who blend power and comfort â€” discover FitHiveâ€™s all-new Fusion Collection designed for movement, durability, and everyday style.</p>
    <a href="/shop" class="fusion-btn">Explore Collection</a>
  </section>

  <!-- ================= FEATURED PRODUCTS ================= -->
  <section class="section__container musthave__container">
    <h2 class="section__title text-center">Fusion Highlights</h2>
    <p class="text-center mb-4">
      Exclusive designs curated for you. Discover the latest in gymwear innovation and style.
    </p>

    <!-- Product Grid -->
    <div class="musthave__grid">
      <% if (products && products.length > 0) { %>
        <% products.forEach(product => { %>
          <article class="musthave__card">
            <% if (product.customizable) { %>
              <div class="customize-badge" title="Customizable Product">
                <i class="fa fa-sliders-h"></i>
              </div>
            <% } %>

            <a href="/product/<%= product.id %>" class="product-link">
              <img src="<%= product.image %>" alt="<%= product.name %>">
            </a>

            <div class="card-body">
              <h5><%= product.name %></h5>
              <p><%= product.desc %></p>
              <div class="product-price-rating">
                <span class="price">â‚¹<%= product.price.toLocaleString() %></span>
                <span class="rating"><i class="fa fa-star"></i> <%= product.rating %></span>
              </div>
            </div>
          </article>
        <% }) %>
      <% } else { %>
        <p class="text-center">No featured products found.</p>
      <% } %>
    </div>
  </section>

 <!-- âš¡ PROMOTIONAL CTA -->
<section class="fusion-promo">
  <h2>Join the Hive Movement</h2>
  <p>Redefine what performance wear feels like â€” every piece in the Fusion Collection is made for motion and built to last.</p>

  <% if (name) { %>
    <!-- ðŸ‘¤ If logged in -->
    <a href="/profile" class="fusion-btn">Go to Your Profile</a>
  <% } else { %>
    <!-- ðŸšª If not logged in -->
    <a href="/login" class="fusion-btn">Join Now</a>
  <% } %>
</section>


  <%- include('partials/footer') %>

  <!-- âœ… Redirect customization icon to product page -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("click", (e) => {
      const badge = e.target.closest(".customize-badge");
      if (!badge) return;

      const card = badge.closest(".musthave__card");
      const productLink = card?.querySelector("a.product-link");

      if (productLink) {
        const productUrl = productLink.getAttribute("href");
        window.location.href = `${productUrl}?showCustomization=true`;
      }
    });
  });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/script.js"></script>
</body>
</html>
